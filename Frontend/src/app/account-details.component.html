<div *ngIf="componentState!=13 && componentState!=12 && componentState!=11">
<h2>Your account</h2>
<hr>
</div>
<div *ngIf="componentState==0">
<form>
<table>
    <tr>
        <th class="toLeft">
            Profile picture:
        </th>
    </tr>
    <tr>
        <th class="toLeft">
            <img class="profilePicDisplay" src={{currentUser.profilePicture}}/>
        </th>
        <th class="toBottom">
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditPictureClicked()"> <mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    
    <tr>
        <th class="toLeft">User name:</th>
        <th class="content">{{currentUser.userName}}</th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditEmailClicked()"> <mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Role:</th>
        <th class="content">{{currentUser.role}}</th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Email:</th>
        <th class="content">{{currentUser.email}}</th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditUserNameClicked()"><mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Discord:</th>
        <th class="content">{{currentUser.discord}}</th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditDiscordClicked()"><mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    </table>
    <table>
    <tr>
        <th class="toLeft">
            <button mat-flat-button color="accent" type="button" (click)="logOutUser()">
                Log out</button>
        </th>
    </tr>
    </table>
    <hr>
    <table>
    <tr>
        <th class="toLeft">
            <br>
            <button mat-flat-button class="delete" type="button" (click)="goToDeleteAccount()">
            Delete Account</button>
        </th>
    </tr>
    </table>

</form>
</div>

<div *ngIf="componentState==7">
<form>
    <table class="account">
        <tr>
            <th>
                Current user name:
            </th>
            <th class="content">
                {{currentUser.userName}}
            </th>
        </tr>
        <tr>
            <th>
                New user name:
            </th>
            <th>
                <mat-form-field color="primary">
                    <mat-label *ngIf="uniqueUserName && !emptyUserName"
                    color="primary">
                       User name
                   </mat-label>
                   <mat-label *ngIf="!uniqueUserName" class="red">
                       User name should be unique
                   </mat-label>
                   <mat-label *ngIf="emptyUserName"
                    class="red">
                       Enter a user name
                   </mat-label>
                   <mat-label *ngIf="tooLongUserName"
                   class="red">
                      Max. 15 characters
                  </mat-label>
                <input matInput name="lol" type="text" color="primary" placeholder="" 
                    [(ngModel)]="newUserName">
                </mat-form-field>
            </th>
        </tr>
        <tr>
            <th>
                <button mat-flat-button color="primary" type="button" 
                (click)="returnToDetails()">Cancel</button>
            </th>
            <th></th>
            <th>
                <button mat-flat-button color="accent" type="button" 
                (click)="updateUserName()">Update</button>
            </th>
        </tr>
    </table>
</form>
</div>
<div *ngIf="componentState==4">
    <form>
        <table class="account">
            <tr>
                <th>
                    Current email:
                </th>
                <th class="content">
                    {{currentUser.email}}
                </th>
            </tr>
            <tr>
                <th class="toLeft">
                    New email:
                </th>
                <th>
                    <mat-form-field color="primary">
                        <mat-label *ngIf="uniqueEmail && !emptyEmail"
                        color="primary">
                           Email
                       </mat-label>
                       <mat-label *ngIf="!uniqueEmail" class="red">
                           Email should be unique
                       </mat-label>
                       <mat-label *ngIf="emptyEmail"
                        class="red">
                           Enter an email
                       </mat-label>
                    <input matInput class="emailInput" name="lol" type="text" color="primary" placeholder="" 
                        [(ngModel)]="newEmail">
                    </mat-form-field>
                </th>
            </tr>
            <tr>
                <th>
                    <button mat-flat-button color="primary" type="button" 
                    (click)="returnToDetails()">Cancel</button>
                </th>
                <th></th>
                <th>
                    <button mat-flat-button color="accent" type="button" 
                    (click)="updateEmail()">Update</button>
                </th>
            </tr>
        </table>
    </form>
    </div>
    <div *ngIf="componentState==14">
        <form>
            <table class="account">
                <tr>
                    <th>
                        Current discord:
                    </th>
                    <th class="content">
                        {{currentUser.discord}}
                    </th>
                </tr>
                <tr>
                    <th class="toLeft">
                        New discord:
                    </th>
                    <th>
                        <mat-form-field color="primary">
                            <mat-label *ngIf="!emptyDiscord"
                            color="primary">
                               Discord
                           </mat-label>
                           <mat-label *ngIf="emptyDiscord"
                            class="red">
                               Enter your discord
                           </mat-label>
                           <mat-label *ngIf="tooLongDiscord"
                           class="red">
                              Max. 20 characters
                          </mat-label>
                        <input matInput name="lol" type="text" color="primary" placeholder="" 
                            [(ngModel)]="newDiscord">
                        </mat-form-field>
                    </th>
                </tr>
                <tr>
                    <th>
                        <button mat-flat-button color="primary" type="button" 
                        (click)="returnToDetails()">Cancel</button>
                    </th>
                    <th></th>
                    <th>
                        <button mat-flat-button color="accent" type="button" 
                        (click)="updateDiscord()">Update</button>
                    </th>
                </tr>
            </table>
        </form>
        </div>
<div *ngIf="componentState==1">
<table class="account">
    <tr>
        <th class="toLeft">
            <mat-label *ngIf="wrongPicture" class="red">
                Select a .png file
            </mat-label>
            <h3>Choose a new profile picture</h3>
        </th>
    </tr>
    <tr>
        <th>
           <br>
    <input id="imgInp" type="file" name="file" accept="image/*" (change)="onFileChanged($event)">
        </th>
    </tr>
    <tr>
        <th>
        <div *ngIf="showImage == true">
        <img class="profilePicDisplay" src={{profilePicDisplay}}/>
        </div>
        </th>
    </tr>
    <tr>
        <th class="toLeft">
            <button mat-flat-button color="primary" type="button" 
            (click)="returnToDetails()">Cancel</button>
        </th>
        <th></th>
        <th>
            <button mat-flat-button color="accent" type="button" 
            (click)="updatePicture()">Update</button>
        </th>
    </tr>
</table >
</div>
<!-- -->
<div *ngIf="componentState==2">
    Your profile picture has beem successfuly updated! c:
    <br>
    New picture should now be visible in the application 
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==3">
    Update failed :c
    <br>
    There has been some trouble updating your profile picture
    <br>
    Make sure you have a stable internet connection or try again later
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==5">
    Your email address has beem successfuly updated! c:
    <br>
    It's now {{currentUser.email}}
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==6">
    Update failed :c
    <br>
    There has been some trouble updating your email address
    <br>
    Make sure you have a stable internet connection or try again later
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==8">
    Your user name has beem successfuly updated! c:
    <br>
    Welcome {{currentUser.userName}}
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==9">
    Update failed :c
    <br>
    There has been some trouble updating your user name
    <br>
    Make sure you have a stable internet connection or try again later
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>

<div *ngIf="componentState==10">
    <table>
        <tr>
            <th class="toLeft">
            <h3>Are you sure you want to delete your account?</h3>
            </th>
        </tr>
        <tr>
            <th class="toLeft">
                <button mat-flat-button color="primary" type="button" (click)="returnToDetails()">
                    Cancel</button>
            </th>
            <th class="toLeft">
                <button mat-flat-button class="delete" type="button" (click)="deleteAccount()">
                    Delete Account</button>
            </th>
        </tr>
    </table>
</div>

<div *ngIf="componentState == 11">
    Your account has been deleted
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    We are sad to see you go :c
    <br>
    You an always try to create another account
</div>

<div *ngIf="componentState == 12">
    Delete failed :c
    <br>
    There has been some trouble with deleting your account
    <br>
    Make sure you have a stable internet connection or try again later
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>


<div *ngIf="componentState==13">
    <h3>You have been logged out successfuly! c:</h3>
</div>

<div *ngIf="componentState == 16">
    Failed to update your Discord contatc info :c
    <br>
    Make sure you have a stable internet connection or try again later
    <br>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>


<div *ngIf="componentState==15">
    <h3>Your Discord contact info have been updated succesfully c:</h3>
</div>
