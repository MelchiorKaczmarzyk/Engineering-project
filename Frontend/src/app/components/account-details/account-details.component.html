<div class="horizontal-center" *ngIf="componentState!=13 && componentState!=12 && componentState!=11">
<h2>Your account</h2>
<hr>
</div>
<div class="horizontal-center" *ngIf="componentState==0">
<form>
    <img class="profilePicDisplay" src={{currentUser.profilePicture}}/>
        
    <button mat-flat-button class="small" color="accent" type="button" 
    (click)="onEditPictureClicked()"> <mat-icon>create</mat-icon></button>
        
<table class="user-details">
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    
    <tr>
        <th class="toLeft">User name:</th>
        <th class="content">{{currentUser.userName}}</th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditEmailClicked()"> <mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Password:</th>
        <th class="content-password">* * * * * </th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="forgotPassword()"> <mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Role:</th>
        <th class="content">{{currentUser.role}}</th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Email:</th>
        <th class="content">{{currentUser.email}}</th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditUserNameClicked()"><mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    <tr>
        <th class="toLeft">Discord:</th>
        <th class="content">{{currentUser.discord}}</th>
        <th>
            <button mat-flat-button class="small" color="accent" type="button" 
            (click)="onEditDiscordClicked()"><mat-icon>create</mat-icon></button>
        </th>
    </tr>
    <tr>
        <th><mat-divider class="mat-divider"></mat-divider></th>
        <th><mat-divider class="mat-divider"></mat-divider></th>
    </tr>
    </table>
    <table class="user-details-buttons">
    <tr>
        <th class="toLeft">
            <button mat-flat-button color="accent" type="button" (click)="logOutUser()">
                Log out</button>
        </th>
    </tr>
    </table>
    <hr>
    <table class="user-details-buttons">
    <tr>
        <th class="toLeft">
            <br>
            <button mat-flat-button class="delete" type="button" (click)="goToDeleteAccount()">
            Delete Account</button>
        </th>
    </tr>
    </table>

</form>
</div>

<div *ngIf="componentState==7" class="horizontal-center">
    <form>
        <table class="account user-details" style="transform: translateX(20px);">
        <tr>
            <th>
                Current user name:
            </th>
            <th class="content">
                {{currentUser.userName}}
            </th>
        </tr>
        <tr>
            <th>
                New user name:
            </th>
            <th>
                <mat-form-field color="primary">
                    <mat-label *ngIf="uniqueUserName && !emptyUserName"
                    color="primary">
                       User name
                   </mat-label>
                   <mat-label *ngIf="!uniqueUserName" class="red">
                       User name is not unique
                   </mat-label>
                   <mat-label *ngIf="emptyUserName"
                    class="red">
                       Enter a user name
                   </mat-label>
                   <mat-label *ngIf="tooLongUserName"
                   class="red">
                      Max. 15 characters
                  </mat-label>
                <input matInput name="lol" type="text" color="primary" placeholder="" 
                    [(ngModel)]="newUserName">
                </mat-form-field>
            </th>
        </tr>
    </table>
    <mat-divider></mat-divider>
    <br>
                <button mat-flat-button color="primary" type="button" class="cancel"
                (click)="returnToDetails()">Cancel</button>

                <button mat-flat-button color="accent" type="button" class="update"
                (click)="updateUserName()">Update</button>

</form>
</div>
<div *ngIf="componentState==4" class="horizontal-center">
    <form>
        <table class="account user-details" style="transform: translateX(20px);">
            <tr>
                <th>
                    Current email:
                </th>
                <th class="content">
                    {{currentUser.email}}
                </th>
            </tr>
            <tr>
                <th class="toLeft">
                    New email:
                </th>
                <th>
                    <mat-form-field color="primary">
                        <mat-label *ngIf="uniqueEmail && !emptyEmail"
                        color="primary">
                           Email
                       </mat-label>
                       <mat-label *ngIf="!uniqueEmail" class="red">
                           Email is not unique
                       </mat-label>
                       <mat-label *ngIf="emptyEmail"
                        class="red">
                           Enter an email
                       </mat-label>
                    <input matInput class="emailInput" name="lol" type="text" color="primary" placeholder="" 
                        [(ngModel)]="newEmail">
                    </mat-form-field>
                </th>
            </tr>
        </table>
        <mat-divider></mat-divider>
        <br>
                    <button mat-flat-button color="primary" type="button" class="cancel"
                    (click)="returnToDetails()">Cancel</button>
             
                    <button mat-flat-button color="accent" type="button" class="update" 
                    (click)="updateEmail()">Update</button>

    </form>
    </div>
    <div *ngIf="componentState==14" class="horizontal-center" >
        <form>
            <table class="account user-details" style="transform: translateX(20px);">
                <tr>
                    <th>
                        Current discord:
                    </th>
                    <th class="content">
                        {{currentUser.discord}}
                    </th>
                </tr>
                <tr>
                    <th class="toLeft">
                        New discord:
                    </th>
                    <th>
                        <mat-form-field color="primary">
                            <mat-label *ngIf="!emptyDiscord"
                            color="primary">
                               Discord
                           </mat-label>
                           <mat-label *ngIf="emptyDiscord"
                            class="red">
                               Enter your discord
                           </mat-label>
                           <mat-label *ngIf="tooLongDiscord"
                           class="red">
                              Max. 20 characters
                          </mat-label>
                        <input matInput name="lol" type="text" color="primary" placeholder="" 
                            [(ngModel)]="newDiscord">
                        </mat-form-field>
                    </th>
                </tr>
            </table>
            <mat-divider></mat-divider>
            <br>
                        <button mat-flat-button color="primary" type="button" class="cancel"
                        (click)="returnToDetails()">Cancel</button>

                        <button mat-flat-button color="accent" type="button" class="update"
                        (click)="updateDiscord()">Update</button>

            
        </form>
        </div>
<div *ngIf="componentState==18" class="horizontal-center">
    <br>
    <h3>
        You have been sent a six-characters-long code to the email address assosiated with this account
    </h3>
    <form>
        <table class="account user-details" style="transform: translateX(20px);">
            <tr>
                <th class="toLeft">
                    Enter the code:
                </th>
            </tr>
            <tr>
                <th>
                    <mat-form-field color="primary">
                        <mat-label *ngIf="!wrongCode" color="primary">
                           Code
                       </mat-label>
                       <mat-label *ngIf="wrongCode" class="red">
                           Incorrect code
                       </mat-label>
                    <input matInput name="code" type="text" color="primary" placeholder=""  
                        maxlength="6" minlength="6" [(ngModel)]="resetCode">
                    </mat-form-field>
                </th>
                <th></th>
                <th>
                    <button mat-flat-button color="accent" type="button" class="resend" 
                    (click)="forgotPassword()">Resend</button>
                </th>
            </tr>
        </table>
            
                <mat-divider></mat-divider>
                <br>
                    <button mat-flat-button color="primary" type="button" class="cancel"
                    (click)="returnToDetails()">Cancel</button>

                    <button mat-flat-button color="accent" type="button" class="update"
                    (click)="goToChangePassword()">Continue</button>
       
    </form>
</div>
<div *ngIf="componentState==20" class="horizontal-center">
    <form>
        <table class="account" class="user-details">
            <tr>
                <th class="toLeft">
                    New Password:
                </th>
            </tr>
            <tr>
                <th class="content">
                    <mat-form-field color="primary">
                        <mat-label *ngIf="!wrongPassword && !emptyPassword && !passwordsNotMatch"
                        color="primary">
                           New Password
                       </mat-label>
                       <mat-label *ngIf="wrongPassword && !emptyPassword && !passwordsNotMatch" 
                       class="red">
                           Password too weak
                       </mat-label>
                       <mat-label *ngIf="emptyPassword && !passwordsNotMatch" 
                       class="red">
                           Enter password
                       </mat-label>
                    <input matInput name="lol" type="password" color="primary" placeholder="" 
                        [(ngModel)]="newPassword">
                    </mat-form-field>
                </th>
            </tr>
            <tr>
                <th class="toLeft">
                    Repeat new Password:
                </th>
            </tr>
            <tr>
                <th>
                    <mat-form-field color="primary">
                        <mat-label *ngIf="!passwordsNotMatch" color="primary">
                           Repeat password
                       </mat-label>
                       <mat-label *ngIf="passwordsNotMatch" class="red">
                           Passwords don't match
                       </mat-label>
                    <input matInput name="lol" type="password" color="primary" placeholder="" 
                        [(ngModel)]="newPasswordRepeat">
                    </mat-form-field>
                </th>
            </tr>
        </table>

                    <button mat-flat-button color="primary" type="button" class="cancel" 
                    (click)="returnToDetails()">Cancel</button>

                    <button mat-flat-button color="accent" type="button" class="update" 
                    (click)="updatePassword()">Update</button>

    </form>
</div>
<div *ngIf="componentState==1" class="horizontal-center">
    <br>
    <label id="custom-file-upload-label" class="custom-file-upload" for="imgInp" *ngIf="!wrongPicture"
    color="primary">
        Choose a new image
    </label>
    <label id="custom-file-upload-label" class="custom-file-upload-red" *ngIf="wrongPicture" 
    for="imgInp">
        Wrong file
    </label>
    <br>
    <input id="imgInp" type="file" name="file" accept="image/*" (change)="onFileChanged($event)">
    <br>
    <div *ngIf="showImage == true">
        <img class="profilePicDisplay" src={{profilePicDisplay}} style="transform: translateX(10px)"/>
    </div>
    <br>

            <button mat-flat-button class="cancel" color="primary" type="button" 
            (click)="returnToDetails()">Cancel</button>

            <button mat-flat-button class="update" color="accent" type="button" 
            (click)="updatePicture()">Update</button>

</div>
<!-- -->
<div *ngIf="componentState==2" class="horizontal-center">
    <h3>Your profile picture has beem successfuly updated! c: </h3>
    <br>
    <h3>New picture should now be visible in the application </h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==3" class="horizontal-center">
    <h3>Update failed :c </h3>
    <br>
    <h3>There has been some trouble updating your profile picture </h3>
    <br>
    <h3>Make sure you have a stable internet connection or try again later</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==5" class="horizontal-center">
    <h3>Your email address has beem successfuly updated! c: </h3>
    <br>
    <h3>It's now {{currentUser.email}}</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==6" class="horizontal-center">
    <h3>Update failed :c</h3>
    <br>
    <h3>There has been some trouble updating your email address</h3>
    <br>
    <h3>Make sure you have a stable internet connection or try again later</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==8" class="horizontal-center">
    <h3>Your user name has beem successfuly updated! c:</h3>
    <br>
    <h3>Welcome {{currentUser.userName}}</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==9" class="horizontal-center">
    <h3>Update failed :c</h3>
    <br>
    <h3>There has been some trouble updating your user name</h3>
    <br>
    <h3>Make sure you have a stable internet connection or try again later</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>

<div *ngIf="componentState==10" class="horizontal-center">
    <table>
        <tr>
            <th class="toLeft">
            <h3>Are you sure you want to delete your account?</h3>
            </th>
        </tr>
        <tr>
            <th class="toLeft">
                <button mat-flat-button color="primary" type="button" (click)="returnToDetails()">
                    Cancel</button>
            </th>
            <th class="toLeft">
                <button mat-flat-button class="delete" type="button" (click)="deleteAccount()">
                    Delete</button>
            </th>
        </tr>
    </table>
</div>

<div *ngIf="componentState == 11" class="horizontal-center">
    <h3>Your account has been deleted, we are sad to see you go :c</h3>
    <br>
    <h3>You can always try to create another account</h3>
</div>

<div *ngIf="componentState == 12" class="horizontal-center">
    <h3>Delete failed :c</h3>
    <br>
    <h3>There has been some trouble with deleting your account</h3>
    <br>
    <h3>Make sure you have a stable internet connection or try again later</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>


<div *ngIf="componentState==13" class="horizontal-center">
    <h3>You have been logged out successfuly! c:</h3>
</div>

<div *ngIf="componentState == 16" class="horizontal-center">
    Failed to update your Discord contatc info :c
    <br>
    <h3>Make sure you have a stable internet connection or try again later</h3>>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>


<div *ngIf="componentState==15" class="horizontal-center">
    <h3>Your Discord contact info has been updated succesfully c:</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==19" class="horizontal-center">
    <h3>Unfortuantely, we were not able to send you a verifivation email :c</h3>
    <br>
    <h3>Please try again lalter</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==23" class="horizontal-center">
    <h3>Something went wrong x_x</h3>
    <br>
    <h3>We were not able to verify if the code is correct. Check your internet connection or try again later</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==21" class="horizontal-center">
    <h3>Your password has been updated succesfully c:</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
<div *ngIf="componentState==22" class="horizontal-center">
    <h3>Could not update the password :/</h3>
    <br>
    <h3>We were unable to update the password. Check your internet connection or try again later</h3>
    <br>
    <mat-divider></mat-divider>
    <br>
    <button mat-flat-button color="primary" type="button" 
        (click)="returnToDetails()">Return to account</button>
</div>
